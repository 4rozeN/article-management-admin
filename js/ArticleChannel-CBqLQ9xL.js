import"./request-BdSuDNhe.js";import{E as F,a as z,c as P,d as W}from"./el-table-column-Bc1s3clI.js";import{a as X,_ as Z,e as j,f as G,g as H}from"./article-Cu4htVqx.js";import{E as J}from"./el-overlay-hpCWJU0a.js";import{E as K,a as O}from"./el-form-item-BcljXiLR.js";import{a as Q,E as R}from"./el-message-BvslkfQZ.js";import"./el-checkbox-COIy7bX-.js";import"./el-tooltip-DMH0W2Uv.js";import"./el-tag-VGpEgyCf.js";import{_ as Y,r as s,P as ee,c as b,a as t,o as E,b as a,f as p,ab as ae,e as w,d as _,al as te,E as le,aW as oe,aX as ne}from"./index-Db3vupSX.js";import{v as re}from"./directive-W5N6jR5e.js";import"./index-Cimaw_1o.js";import"./_baseClone-Dal6ipSy.js";import"./isEqual-8ZbLWmUl.js";import"./use-form-common-props-DyvR750n.js";import"./vnode-knksCItM.js";import"./castArray-DBQUQV92.js";const se={class:"content"},ie={style:{flex:"auto"}},ue={__name:"ArticleChannel",setup(de){const v=s(null),x=s("rtl"),i=s(!1),n=s(!1),g=s([]),u=s(""),m=async()=>{n.value=!0;const r=await X();n.value=!1,g.value=r.data.data};ee(()=>{m()});const l=s({category_name:"",category_alias:""}),V=()=>{u.value="add",i.value=!0},h=r=>{l.value={id:r.documentId,category_name:r.category_name,category_alias:r.category_alias},i.value=!0,u.value="update"},k=async r=>{n.value=!0,await j(r.documentId),n.value=!1,m()},B=()=>{J.confirm("您确定要关闭此弹层吗？未保存的修改可能丢失。","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{f()}).catch(()=>{le.info("操作取消")})},A=async()=>{await G(l.value.id,l.value)},I=async()=>{await H(l.value)},S=async()=>{if(n.value=!0,await v.value.validate(),u.value==="add")await I();else if(u.value==="update")await A();else{console.error("未知操作类型");return}l.value={cate_name:"",cate_alias:""},n.value=!1,i.value=!1,m()},f=()=>{n.value=!0,l.value={cate_name:"",cate_alias:""},u.value="",i.value=!1,n.value=!1},$={category_name:[{required:!0,message:"请输入分类名称",trigger:"blur"},{pattern:/^\S{1,10}$/,message:"分类名必须是1-10位的非空字符",trigger:"blur"}],category_alias:[{required:!0,message:"请输入分类别名",trigger:"blur"},{pattern:/^[a-zA-Z0-9]{1,15}$/,message:"分类别名必须是1-15位的字母数字",trigger:"blur"}]};return(r,e)=>{const d=Q,c=F,T=z,D=P,y=R,C=K,M=O,L=W,N=Z,U=re;return E(),b(N,{title:"文章分类"},{extra:t(()=>[a(d,{type:"primary",onClick:e[0]||(e[0]=o=>V())},{default:t(()=>e[6]||(e[6]=[p("添加分类")])),_:1})]),default:t(()=>[ae((E(),b(D,{data:g.value,style:{width:"100%"}},{empty:t(()=>[a(T,{description:"没有数据"})]),default:t(()=>[a(c,{label:"序号",width:"100",type:"index"}),a(c,{label:"分类名称",prop:"category_name"}),a(c,{label:"分类别名",prop:"category_alias"}),a(c,{label:"操作",width:"100"},{default:t(({row:o})=>[a(d,{icon:w(oe),circle:"",plain:"",type:"primary",onClick:q=>h(o)},null,8,["icon","onClick"]),a(d,{icon:w(ne),circle:"",plain:"",type:"danger",onClick:q=>k(o)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[U,n.value]]),a(L,{modelValue:i.value,"onUpdate:modelValue":e[5]||(e[5]=o=>i.value=o),direction:x.value,"before-close":B},{header:t(()=>[_("h4",null,"当前分类项为："+te(l.value.cate_name||"新增分类"),1)]),default:t(()=>[_("div",se,[a(M,{ref_key:"form",ref:v,model:l.value,rules:$,"label-width":"100px",style:{"padding-right":"30px"}},{default:t(()=>[a(C,{label:"分类名称",prop:"category_name"},{default:t(()=>[a(y,{modelValue:l.value.category_name,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.category_name=o),minlength:"1",maxlength:"10"},null,8,["modelValue"])]),_:1}),a(C,{label:"分类别名",prop:"category_alias"},{default:t(()=>[a(y,{modelValue:l.value.category_alias,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.category_alias=o),minlength:"1",maxlength:"15"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),footer:t(()=>[_("div",ie,[a(d,{type:"primary",onClick:e[3]||(e[3]=o=>f())},{default:t(()=>e[7]||(e[7]=[p("取消")])),_:1}),a(d,{type:"primary",onClick:e[4]||(e[4]=o=>S())},{default:t(()=>e[8]||(e[8]=[p("提交")])),_:1})])]),_:1},8,["modelValue","direction"])]),_:1})}}},Ae=Y(ue,[["__scopeId","data-v-0df5afe1"]]);export{Ae as default};
