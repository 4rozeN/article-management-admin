import"./request-CCFT6Jck.js";import{E as R,a as q}from"./el-col-Ti9LfGIa.js";import{E as B}from"./el-checkbox-KckIExOt.js";import{E as L,a as I}from"./el-form-item-jw1qpvqQ.js";import{E as N}from"./el-link-hY7UyywT.js";import{E as j,a as z}from"./el-message-DbWNfBXu.js";import{u as F,a as M}from"./user-ClribAK8.js";import{_ as T,u as A,r as g,w as D,c as _,o as c,a,b as l,d as x,e as t,f as d,E as U,g as G,h as C,m as H,l as V}from"./index-Bcf4x66B.js";import"./use-form-common-props-Vsfio6H-.js";import"./isEqual-BssAe_Ay.js";import"./_baseClone-CbmDjEJu.js";import"./castArray-a4Idck-M.js";const K={class:"flex"},O={__name:"LoginPage",setup(Q){const m=A(),u=g(!1),v=g(!1),p=g(),o=g({username:"",email:"",password:"",confirmPassword:""}),y={username:[{required:!0,message:"用户名不能为空！",trigger:"change"},{min:2,max:8,message:"用户名长度必须在2到8个字符之间！",trigger:"change"}],email:[{required:!0,message:"邮箱不能为空！",trigger:"change"},{type:"email",message:"邮箱格式不正确！",trigger:"change"}],password:[{required:!0,message:"密码不能为空！",trigger:"change"},{pattern:/^\S{6,16}$/,message:"密码长度必须在6到16个字符之间！",trigger:"change"}],confirmPassword:[{required:!0,message:"密码不能为空！",trigger:"change"},{pattern:/^\S{6,16}$/,message:"密码长度必须在6到16个字符之间！",trigger:"change"},{validator:(f,e,i)=>{e!==o.value.password?i(new Error("两次密码输入不一致！")):i()}}]},P=async()=>{m.removeJwt(),await p.value.validate(),await F(o.value),U.success("注册成功！"),u.value=!1},E=G(),$=async()=>{m.removeJwt(),await p.value.validate();const f=await M(o.value);v.value===!0?m.setJwt(f.data.jwt):m.setSessionJwt(f.data.jwt),U.success("登录成功！"),u.value=!1,E.push("/")};return D(u,()=>{o.value={username:"",password:"",email:"",confirmPassword:""}}),(f,e)=>{const i=R,r=L,n=j,k=z,w=N,b=I,J=B,S=q;return c(),_(S,{class:"login-page"},{default:a(()=>[l(i,{span:12,class:"bg"}),l(i,{span:6,offset:3,class:"form"},{default:a(()=>[u.value?(c(),_(b,{key:0,model:o.value,rules:y,ref_key:"form",ref:p,size:"large",autocomplete:"off"},{default:a(()=>[l(r,null,{default:a(()=>e[12]||(e[12]=[x("h1",null,"注册",-1)])),_:1}),l(r,{prop:"username"},{default:a(()=>[l(n,{modelValue:o.value.username,"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.username=s),"prefix-icon":t(C),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),l(r,{prop:"email"},{default:a(()=>[l(n,{modelValue:o.value.email,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.email=s),"prefix-icon":t(H),placeholder:"请输入邮箱地址"},null,8,["modelValue","prefix-icon"])]),_:1}),l(r,{prop:"password"},{default:a(()=>[l(n,{modelValue:o.value.password,"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.password=s),"prefix-icon":t(V),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),l(r,{prop:"confirmPassword"},{default:a(()=>[l(n,{modelValue:o.value.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.confirmPassword=s),"prefix-icon":t(V),type:"password",placeholder:"请输入再次密码"},null,8,["modelValue","prefix-icon"])]),_:1}),l(r,null,{default:a(()=>[l(k,{class:"button",type:"primary","auto-insert-space":"",onClick:e[4]||(e[4]=s=>P())},{default:a(()=>e[13]||(e[13]=[d(" 注册 ")])),_:1})]),_:1}),l(r,{class:"flex"},{default:a(()=>[l(w,{type:"info",underline:!1,onClick:e[5]||(e[5]=s=>u.value=!1)},{default:a(()=>e[14]||(e[14]=[d(" ← 返回 ")])),_:1})]),_:1})]),_:1},8,["model"])):(c(),_(b,{key:1,model:o.value,rules:y,ref_key:"form",ref:p,size:"large"},{default:a(()=>[l(r,null,{default:a(()=>e[15]||(e[15]=[x("h1",null,"登录",-1)])),_:1}),l(r,{prop:"username"},{default:a(()=>[l(n,{modelValue:o.value.username,"onUpdate:modelValue":e[6]||(e[6]=s=>o.value.username=s),"prefix-icon":t(C),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),l(r,{prop:"password"},{default:a(()=>[l(n,{modelValue:o.value.password,"onUpdate:modelValue":e[7]||(e[7]=s=>o.value.password=s),name:"password","prefix-icon":t(V),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),l(r,{class:"flex"},{default:a(()=>[x("div",K,[l(J,{modelValue:v.value,"onUpdate:modelValue":e[8]||(e[8]=s=>v.value=s)},{default:a(()=>e[16]||(e[16]=[d("记住我")])),_:1},8,["modelValue"]),l(w,{type:"primary",underline:!1,onClick:e[9]||(e[9]=s=>t(E).push("/reset/password"))},{default:a(()=>e[17]||(e[17]=[d("忘记密码？")])),_:1})])]),_:1}),l(r,null,{default:a(()=>[l(k,{onClick:e[10]||(e[10]=s=>$()),class:"button",type:"primary","auto-insert-space":""},{default:a(()=>e[18]||(e[18]=[d("登录")])),_:1})]),_:1}),l(r,{class:"flex"},{default:a(()=>[l(w,{type:"info",underline:!1,onClick:e[11]||(e[11]=s=>u.value=!0)},{default:a(()=>e[19]||(e[19]=[d(" 注册 → ")])),_:1})]),_:1})]),_:1},8,["model"]))]),_:1})]),_:1})}}},ue=T(O,[["__scopeId","data-v-0bc0f01b"]]);export{ue as default};
