import"./request-DzDCiaV-.js";import"./el-tag-BSGp5EO0.js";import{d as X,a as Z,E as ee}from"./el-image-viewer-BqqupmGU.js";import{a as te}from"./avatar-CpFvRGyN.js";import{d as se}from"./user-CU8yOTwH.js";import{v as P,O as U,H as x,x as W,ab as V,aa as A,aj as le,n as F,t as ae,e as i,o as c,i as v,d as k,a5 as E,aK as M,c as j,b,F as G,aG as re,L as ne,N as oe,y as ie,D as z,C as H,a2 as ce,f as y,al as $,I as pe,M as ue,r as K,P as de,a as _,E as me}from"./index-BGD1WgRO.js";import{g as fe,f as be}from"./vnode-Cfa3feWg.js";import{u as ge}from"./use-form-common-props-Bx3kOFCg.js";import"./index-MbtAv7ws.js";const R=Symbol("elDescriptions");var T=P({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String,default:"td"},type:{type:String}},setup(){return{descriptions:U(R,{})}},render(){var S,a,r,N,p,u,m;const s=fe(this.cell),e=(((S=this.cell)==null?void 0:S.dirs)||[]).map(w=>{const{dir:L,arg:O,modifiers:q,value:Q}=w;return[L,Q,O,q]}),{border:t,direction:o}=this.descriptions,l=o==="vertical",D=((N=(r=(a=this.cell)==null?void 0:a.children)==null?void 0:r.label)==null?void 0:N.call(r))||s.label,f=(m=(u=(p=this.cell)==null?void 0:p.children)==null?void 0:u.default)==null?void 0:m.call(u),d=s.span,g=s.rowspan,I=s.align?`is-${s.align}`:"",B=s.labelAlign?`is-${s.labelAlign}`:I,Y=s.className,h=s.labelClassName,C={width:x(s.width),minWidth:x(s.minWidth)},n=W("descriptions");switch(this.type){case"label":return V(A(this.tag,{style:C,class:[n.e("cell"),n.e("label"),n.is("bordered-label",t),n.is("vertical-label",l),B,h],colSpan:l?d:1,rowspan:l?1:g},D),e);case"content":return V(A(this.tag,{style:C,class:[n.e("cell"),n.e("content"),n.is("bordered-content",t),n.is("vertical-content",l),I,Y],colSpan:l?d:d*2-1,rowspan:l?g*2-1:g},f),e);default:return V(A("td",{style:C,class:[n.e("cell"),I],colSpan:d,rowspan:g},[le(D)?void 0:A("span",{class:[n.e("label"),h]},D),A("span",{class:[n.e("content"),Y]},f)]),e)}}});const ve=F({row:{type:ae(Array),default:()=>[]}}),_e=P({name:"ElDescriptionsRow"}),ye=P({..._e,props:ve,setup(S){const a=U(R,{});return(r,N)=>i(a).direction==="vertical"?(c(),v(E,{key:0},[k("tr",null,[(c(!0),v(E,null,M(r.row,(p,u)=>(c(),j(i(T),{key:`tr1-${u}`,cell:p,tag:"th",type:"label"},null,8,["cell"]))),128))]),k("tr",null,[(c(!0),v(E,null,M(r.row,(p,u)=>(c(),j(i(T),{key:`tr2-${u}`,cell:p,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(c(),v("tr",{key:1},[(c(!0),v(E,null,M(r.row,(p,u)=>(c(),v(E,{key:`tr3-${u}`},[i(a).border?(c(),v(E,{key:0},[b(i(T),{cell:p,tag:"td",type:"label"},null,8,["cell"]),b(i(T),{cell:p,tag:"td",type:"content"},null,8,["cell"])],64)):(c(),j(i(T),{key:1,cell:p,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var he=G(ye,[["__file","descriptions-row.vue"]]);const we=F({border:Boolean,column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:re,title:{type:String,default:""},extra:{type:String,default:""}}),Se=P({name:"ElDescriptions"}),Ne=P({...Se,props:we,setup(S){const a=S,r=W("descriptions"),N=ge(),p=ne();oe(R,a);const u=ie(()=>[r.b(),r.m(N.value)]),m=(e,t,o,l=!1)=>(e.props||(e.props={}),t>o&&(e.props.span=o),l&&(e.props.span=t),e),s=()=>{if(!p.default)return[];const e=be(p.default()).filter(d=>{var g;return((g=d==null?void 0:d.type)==null?void 0:g.name)==="ElDescriptionsItem"}),t=[];let o=[],l=a.column,D=0;const f=[];return e.forEach((d,g)=>{var I,B,Y;const h=((I=d.props)==null?void 0:I.span)||1,C=((B=d.props)==null?void 0:B.rowspan)||1,n=t.length;if(f[n]||(f[n]=0),C>1)for(let w=1;w<C;w++)f[Y=n+w]||(f[Y]=0),f[n+w]++,D++;if(f[n]>0&&(l-=f[n],f[n]=0),g<e.length-1&&(D+=h>l?l:h),g===e.length-1){const w=a.column-D%a.column;o.push(m(d,w,l,!0)),t.push(o);return}h<l?(l-=h,o.push(d)):(o.push(m(d,h,l)),t.push(o),l=a.column,o=[])}),t};return(e,t)=>(c(),v("div",{class:z(i(u))},[e.title||e.extra||e.$slots.title||e.$slots.extra?(c(),v("div",{key:0,class:z(i(r).e("header"))},[k("div",{class:z(i(r).e("title"))},[H(e.$slots,"title",{},()=>[y($(e.title),1)])],2),k("div",{class:z(i(r).e("extra"))},[H(e.$slots,"extra",{},()=>[y($(e.extra),1)])],2)],2)):ce("v-if",!0),k("div",{class:z(i(r).e("body"))},[k("table",{class:z([i(r).e("table"),i(r).is("bordered",e.border)])},[k("tbody",null,[(c(!0),v(E,null,M(s(),(o,l)=>(c(),j(he,{key:l,row:o},null,8,["row"]))),128))])],2)],2)],2))}});var De=G(Ne,[["__file","description.vue"]]);const Ee=F({label:{type:String,default:""},span:{type:Number,default:1},rowspan:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}),J=P({name:"ElDescriptionsItem",props:Ee}),ke=pe(De,{DescriptionsItem:J}),$e=ue(J),Me={__name:"UserProfile",setup(S){const a=K({}),r=K(""),N=async()=>{await se().then(m=>{a.value=m.data}).catch(m=>{console.log(m),me.error("服务异常，获取用户信息失败")}),console.log(a.value)};de(async()=>{await N(),r.value="http://110.41.165.30:1337"+a.value.avatar.url});const u=(()=>{const m=X(a.value.createdAt).format("YYYY-MM-DD HH:mm:ss"),s=String(m).slice(0,4),t=new Date().getFullYear()-Number(s);return t<=3?t===0?"刚刚入职":`入职${s}年`:t>3?"资深员工":"未知"})();return(m,s)=>{const e=Z,t=$e,o=ee,l=ke;return c(),j(l,{title:"当前用户信息",border:""},{default:_(()=>[b(t,{rowspan:2,width:140,label:"用户头像",align:"center"},{default:_(()=>[b(e,{style:{width:"100px",height:"100px"},src:r.value||i(te)},null,8,["src"])]),_:1}),b(t,{label:"用户名"},{default:_(()=>[y($(a.value.username),1)]),_:1}),b(t,{label:"联系电话"},{default:_(()=>[y($(a.value.telphone),1)]),_:1}),b(t,{label:"邮箱地址"},{default:_(()=>[y($(a.value.email),1)]),_:1}),b(t,{label:"标签"},{default:_(()=>[b(o,{size:"small"},{default:_(()=>[y($(a.value.blocked?"已封禁":"账号正常"),1)]),_:1}),s[0]||(s[0]=y("   ")),b(o,{size:"small"},{default:_(()=>[y($(i(u)),1)]),_:1})]),_:1}),b(t,{label:"系统操作须知"},{default:_(()=>s[1]||(s[1]=[y("这里可以写一些系统操作须知")])),_:1})]),_:1})}}};export{Me as default};
